{% extends "layout.default.twig.html" %}

{% block title %}Les émissions{% endblock %}

{% block latest %}
<a href="{{ path('emission', {id:shows.0.id, type:shows.0.typeSlug}) }}">
  {{ shows.0.type }} {{ shows.0.number }} : {{ shows.0.authors }} - {{ shows.0.title }}
</a>
{% endblock %}

{% block navigation %}
 <div class="filterContainer" id="filterDiv">
 	<!-- <div class="showsFakeFilter hide-on-mobile">Les émissions :</div>
	<div class="allFilter hide-on-mobile" onclick="filterSelection('all')"><strong>TOUT !</strong></div> 
	<div class="ailleursFilter" onclick="filterSelection('ailleurs')"><strong>Ailleurs</strong><span class="hide-on-mobile"> invité</span></div> 
	<div class="bagageFilter" onclick="filterSelection('bagage')"><strong>Bagage</strong><span class="hide-on-mobile"> maison de disques</span></div> 
	<div class="bureauFilter" onclick="filterSelection('bureau')"><strong>Bureau</strong><span class="hide-on-mobile"> réunions incongrues</span></div> 
	<div class="ouiedireFilter" onclick="filterSelection('ouiedire')"><strong>Ouïedire</strong><span class="hide-on-mobile"> fait maison</span></div> -->
	<div class="allFilter hide-on-mobile" onclick="filterSelection('all')"><strong>Collections</strong></div> 
	<div class="ailleursFilter" onclick="filterSelection('ailleurs')"><strong>Ailleurs</strong></div> 
	<div class="bagageFilter" onclick="filterSelection('bagage')"><strong>Bagage</strong></div> 
	<div class="bureauFilter" onclick="filterSelection('bureau')"><strong>Bureau</strong></div> 
	<div class="ouiedireFilter" onclick="filterSelection('ouiedire')"><strong>Ouïedire</strong></div>
</div>
{% endblock %}

{% block content %}
<!-- <h5><a href="{{ path('emission', {id:randomShow.id, type:randomShow.typeSlug}) }}">Écouter de manière aléatoire</a></h5><hr>-->
<div class="grid-100 tablet-grid-100 mobile-grid-100">
	<div class="bloc center">
		<div class="infos">
			<span class="big"> 
				<a href="{{ url('artists', {artist:artist}) }}">{{ artists|length }} artistes </a><span class="diamond"> &#11045; </span>
				{{ shows|length }} émissions<span class="diamond"> &#11045; </span> 
				<a href="{{ url('djs') }}">{{ djs|length }} curateurs</a>
			</span>
		</div>
	</div>
</div>
<div class="grid-100 mobile-grid-100">
	<div class="showContainer">
		<ul>
		{% for show in shows %}
			{% if loop.index0 == (loop.length / 1)|number_format %}{% endif %}
			<li class="show {{ show.typeSlug }}">
				<a href="{{ path('emission', {id:show.id, type:show.typeSlug}) }}" title="{{ show.authors }} - {{ show.title }} ({{ show.releasedAt|date('d/m/Y') }})">
					<strong>{{ show.number }}</strong> {{ show.authors }} - {{ show.title }}
				</a>
			</li>
		{% endfor %}
		</ul>	
	</div>	
</div>

{% endblock %}



{% block userscript %}
<script type="text/javascript">
	filterSelection("all") 
	function filterSelection(choice) {
	  var x, i;
	  emissions = document.getElementsByClassName("show");
	  if (choice == "all") choice = "";
	  for (i = 0; i < emissions.length; i++) {
		  removeClass(emissions[i], "displayBlock");
		  addClass(emissions[i], "displayNone");
	    if (emissions[i].className.indexOf(choice) > -1) addClass(emissions[i], "displayBlock");
	    if (emissions[i].className.indexOf(choice) > -1) removeClass(emissions[i], "displayNone");
	  }
	}
	function addClass(element, name) {
	  var i, arr1, arr2;
	  arr1 = element.className.split(" ");
	  arr2 = name.split(" ");
	  for (i = 0; i < arr2.length; i++) {
	    if (arr1.indexOf(arr2[i]) == -1) {
	      element.className += " " + arr2[i];
	    }
	  }
	}
	function removeClass(element, name) {
	  var i, arr1, arr2;
	  arr1 = element.className.split(" ");
	  arr2 = name.split(" ");
	  for (i = 0; i < arr2.length; i++) {
	    while (arr1.indexOf(arr2[i]) > -1) {
	      arr1.splice(arr1.indexOf(arr2[i]), 1);
	    }
	  }
	  element.className = arr1.join(" ");
	}
</script>
{% endblock %}
